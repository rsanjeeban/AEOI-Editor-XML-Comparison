@page "/compare"
@inject NavigationManager NavigationManager
@using System.IO
@inject IJSRuntime JS

<h1>Upload comparison file :</h1>

<TelerikUpload 
    SaveUrl="@SaveUrl"
    RemoveUrl="@RemoveUrl"
    OnSuccess="@OnSuccessHandler"
    SaveField="file"
    RemoveField="fileToRemove"
    AllowedExtensions="@( new List<string>() { ".xml" } )"
    MaxFileSize="2048000"
    MinFileSize="1024">
</TelerikUpload>


@code {
    // One way to define relative paths is to put the desired URL here.
    // This can be a full URL such as https://mydomain/myendpoint/save
    public string SaveUrl => ToAbsoluteUrl("api/comparison/compare");
    public string RemoveUrl => ToAbsoluteUrl("api/comparison/remove");

    public string ToAbsoluteUrl(string url)
    {
        return $"{NavigationManager.BaseUri}{url}";
    }
    
    async Task OnSuccessHandler(UploadSuccessEventArgs e)
    {  
       await JS.InvokeVoidAsync("triggerFileDownload", "Report",e.Request.ResponseText,e);
    }
}